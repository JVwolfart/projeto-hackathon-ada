{
    "openapi": "3.0.0",
    "info": {
        "title": "API Ada Hack - Corp Solutions (empresa fictícia)",
        "description": "Projeto desenvolvido para o Hackathon [Ada](https://ada.tech/), com inicio em 09/04/2024 e término com a banca avaliadora em 18/04/2024. O objetivo principal deste Hackathon é criar estratégias e desenvolver soluções inovadoras que ajudem a Corp Solutions (empresa imaginária) a aumentar a diversidade e a inclusão em sua equipe. Os participantes deverão criar soluções que promovam uma cultura organizacional mais diversificada e inclusiva, utilizando tecnologia e criatividade para enfrentar esse desafio. O hackathon visa encontrar ideias e projetos que possam ser implementados dentro de ambientes corporativos para impulsionar a diversidade e a inclusão no ambiente de trabalho, contribuindo para o crescimento dessa causa dentro do mercado de trabalho."
    },
    "version": "1.0.0",
    "servers": [
        {
            "url": "http://localhost:3000/v1",
            "description": "MVP do projeto para apresentação no Hackathon"
        }
    ],
    "paths": {
        "/candidato": {
            "post": {
                "summary": "Cadastro de pessoas (candidatos/usuários)",
                "description": "Esta rota é responsável pelo cadastro de pessoas, que inicialmente são candidatos que vão se cadastrar no sistema enviando alguns dados pessoais, e principalmente os dados relacionados a diversidade, como por exemplo etnia, identidade de gênero, orientação sexual, e se é PcD",
                "tags": ["Candidato/usuário/funcionário"],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Candidato"
                            },
                            "examples": {
                                "candidato": {
                                    "value": {
                                        "nome": "Candidato de teste",
                                        "cpf": "12345678901",
                                        "email": "teste@teste.com",
                                        "senha": "1234",
                                        "data_nascimento": "1990-01-01",
                                        "etnia": "branca",
                                        "identidade_genero": "homem cis",
                                        "orientacao_sexual": "heterossexual",
                                        "pcd": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "$ref": "#/components/schemas/Candidato"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erro ao cadastrar o candidato. Verifique"
                    },
                    "409": {
                        "description": "Já existe um candidato com o mesmo CPF ou email"
                    },
                    "500": {
                        "description": "Ocorreu um erro interno no servidor"
                    }
                }
            }
        },

        "/login": {
            "post": {
            "summary": "Login no sistema",
            "description": "Esta rota é responsável pela autenticação e login do usuário",
            "tags": ["Login"],
            "requestBody": {
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/Login"
                        },
                        "examples": {
                            "login": {
                                "value": {
                                    "email": "teste@teste.com",
                                    "senha": "1234"
                                }
                            }
                        }
                    }
                }
            },
            "responses": {
                "200": {
                    "description": "OK",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "$ref": "#/components/schemas/Login"
                            }
                        }
                    }
                },
                "400": {
                    "description": "Erro ao fazer login. Verifique"
                },
                "500": {
                    "description": "Ocorreu um erro interno no servidor"
                }
            }
        }
        },


        "/whoami": {
            "get": {
            "summary": "Dados do usuário logado",
            "description": "Esta rota fornece ao usuário logado seus dados. ATENÇÃO: é necessário autenticação para acesso a essa rota. Nível de acesso: 0 (este é o acesso básico permitido ao candidato assim que ele se cadastra no sistema, e não possui nenhum nível de acesso as demais funcionalidades restritas do sistema. Para acessar demais funcionalidades, apenas se ele for contratado pela empresa, e receber seu nível de acesso conforme a política da empresa em relação ao cargo que o candidato irá ocupar)",
            "tags": ["Cadastro de PcD"],
            "security": [{"bearerAuth": []}],
            "responses": {
                "200": {
                    "description": "OK",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "$ref": "#/components/schemas/Whoami"
                            }
                        }
                    }
                },
                "400": {
                    "description": "Token não informado"
                },
                "401": {
                    "description": "Token inválido"
                },
                "500": {
                    "description": "Ocorreu um erro interno no servidor"
                }
            }
        }
        },


        "/deficiencia_candidato": {
            "post": {
            "summary": "Cadastro de deficiência do candidato",
            "description": "Esta rota é responsável pelo cadastro de deficiências em candidatos PcD",
            "tags": ["Cadastro de PcD"],
            "security": [{"bearerAuth": []}],
            "requestBody": {
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/PcD"
                        },
                        "examples": {
                            "deficiencia_candidato": {
                                "value": {
                                    "id_candidato": "042bb317-77eb-4bde-93e0-da54c7ff9461",
                                    "tipo_deficiencia": "física",
                                    "descricao": "",
                                    "cid": ""
                                }
                            }
                        }
                    }
                }
            },
            "responses": {
                "200": {
                    "description": "OK",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "$ref": "#/components/schemas/PcD"
                            }
                        }
                    }
                },
                "400": {
                    "description": "Erro ao cadastrar deficiência para o candidato"
                },
                "404": {
                    "description": "Candidato não encontrado"
                },
                "500": {
                    "description": "Ocorreu um erro interno no servidor"
                }
            }
        }
        }
    },
    "components": {
        "schemas": {
            "Candidato": {
                "type": "object",
                "properties": {
                    "nome": {
                        "type": "string"
                    },
                    "cpf": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "senha": {
                        "type": "string"
                    },
                    "data_nascimento": {
                        "type": "string"
                    },
                    "etnia": {
                        "type": "string",
                        "enum": ["amarela", "branca", "preta", "parda", "indígena", "prefiro não informar"]
                    },
                    "identidade_genero": {
                        "type": "string",
                        "enum": ["mulher cis", "homem cis", "mulher trans", "homem trans", "não-binário", "neutro", "agênero"]
                    },
                    "orientacao_sexual": {
                        "type": "string",
                        "enum": ["heterossexual", "homossexual", "bissexual", "assexual", "pansexual", "outro"]
                    },
                    "pcd": {
                        "type": "boolean"
                    }
                }
            },
            "Login": {
                "type": "object",
                "properties": {
                    "email": {
                        "type": "string"
                    },
                    "senha": {
                        "type": "string"
                    }
                }
            },
            "Whoami": {
                "type": "object",
                "properties": {
                    "nome": {
                        "type": "string"
                    },
                    "cpf": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "senha": {
                        "type": "string"
                    },
                    "data_nascimento": {
                        "type": "string"
                    },
                    "etnia": {
                        "type": "string",
                        "enum": ["amarela", "branca", "preta", "parda", "indígena", "prefiro não informar"]
                    },
                    "identidade_genero": {
                        "type": "string",
                        "enum": ["mulher cis", "homem cis", "mulher trans", "homem trans", "não-binário", "neutro", "agênero"]
                    },
                    "orientacao_sexual": {
                        "type": "string",
                        "enum": ["heterossexual", "homossexual", "bissexual", "assexual", "pansexual", "outro"]
                    },
                    "pcd": {
                        "type": "boolean"
                    },
                    "iat": {
                        "type": "number"
                    },
                    "exp": {
                        "type": "number"
                    }
                }
            },

            "PcD": {
                "type": "object",
                "properties": {
                    "id_candidato": {
                        "type": "string"
                    },
                    "tipo_deficiencia": {
                        "type": "string",
                        "enum": ["visual", "auditiva", "mental", "intelectual", "espectro autista", "física"]
                    },
                    "descricao": {
                        "type": "string"
                    },
                    "cid": {
                        "type": "string"
                    }
                }
            }
        },
        
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT"
            }
        }
    }
}